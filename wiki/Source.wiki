#summary Getting Project Source Code

Our project is hosted at http://gitorious.org/0xdroid. For a more complete set of instructions, see the [http://gitorious.org/0xdroid/pages/Build-from-Scratch Build From Scratch] wiki page.

== Precondition: Sun JDK ==

NOTE: You would need Sun JDK version 1.5 to build Donut.  However, Sun JDK version 1.5 is known to be EOL (End-Of-Line), and Ubuntu Linux 9.10 no longer ships with sun-java5-jdk.  If you are using Ubuntu Linux 9.10, just add these two line in file /etc/apt/sources.list:
{{{
deb http://us.archive.ubuntu.com/ubuntu/ karmic-updates multiverse
deb-src http://us.archive.ubuntu.com/ubuntu/ karmic-updates multiverse
}}}
and install Sun JDK 1.5:
{{{
sudo apt-get update
sudo apt-get install sun-java5-jdk
}}}
To set the system to use Java 5 you need to update your java alternatives by running
{{{
$ sudo update-alternatives --config java
}}}
Choose java-1.5.0-sun and you should be done.

== Precondition: git and repo ==

Before you download the source, you will need [http://git-scm.com/ git] and [http://source.android.com/download/using-repo repo] tools.

On an Ubuntu 9.04 host, you can do the following:

Getting git:
{{{
$ sudo apt-get install git-core
}}}
Getting repo:
{{{
$ curl -o ~/bin/repo http://android.git.kernel.org/repo
$ chmod a+x ~/bin/repo
}}}
You can find detailed repo installing instructions [http://source.android.com/download/using-repo here]

== Get 0xdroid source ==

Download the 0xdroid source code:
{{{
mkdir beagle-donut
cd beagle-donut
repo init -u git://gitorious.org/0xdroid/manifest.git -b beagle-donut
repo sync
}}}

Alternatively, use faster git mirror if encountering the problem during 'repo sync':
{{{
repo init -u git://git.0xlab.org/manifest.git -b beagle-donut
sed -i -e 's#git://gitorious.org/0xdroid/#git://git.0xlab.org/#'
.repo/manifests/default.xml
repo sync 
}}}

== Build 0xdroid from source ==

Setup beagleboard specific configurations and enabled components:
{{{
echo "TARGET_PRODUCT := beagleboard” > buildspec.mk
echo “INSTALL_PREBUILT_DEMO_APKS := true” >> buildspec.mk
}}}

Build as expected:
{{{
make
}}}

Once successfully built, the generated root file system is here:
 * out/target/product/beagleboard/root/
 * out/target/product/beagleboard/system/

And the corresponding [http://www.linux-mtd.infradead.org/doc/ubifs.html UBIFS] system image for NAND flash:
 * out/target/product/beagleboard/system.img

For advanced usage, fetch and build Linux kernel from scratch:
{{{
cd ..
git clone git://gitorious.org/0xlab-kernel/kernel.git
cd kernel
git checkout -b kernel_omap3 origin/omap3
make ARCH=arm omap3_beagle_defconfig
make ARCH=arm CROSS_COMPILE=../beagle-donut/prebuilt/linux-x86/toolchain/arm-android-eabi-4.4.1/bin/arm-android-eabi- uImage
make ARCH=arm CROSS_COMPILE=../beagle-donut/prebuilt/linux-x86/toolchain/arm-android-eabi-4.4.1/bin/arm-android-eabi- modules
}}}